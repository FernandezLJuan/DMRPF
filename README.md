# Decentralized Multi-Robot Path Finding

This repository contains an implementation of the behavior described in the paper [Decentralized Multi-Agent Path Finding in Dynamic Warehouse Environments](https://ieeexplore.ieee.org/document/10406648) by Anders Lyne Christensen and Abderraouf Maoudj.

The code implements a simulation of a grid environment in which each cell is a node in an 8-connected graph. Robots move across the different cells and solve conflicts locally.

## Installation

To build and run this project, follow these steps:

### Prerequisites
Make sure you have the following installed:
- [Clang++](https://clang.llvm.org/) (g++ should do the trick as well, I just like clang's warnings a bit more)
- [Raylib](https://www.raylib.com/)
- [X11](https://www.x.org/)
- [GL](https://www.khronos.org/opengl/)
- [pthread, dl, rt, config++] (These are typically available by default on Linux)

### Build Instructions
1. Clone the repository:
   ```bash
   git clone https://github.com/FernandezLJuan/DMRPF

2. Compile the code:
   ```bash
   cd DMRPF/src
   make

## Running the Simulator

### Configuration File (`default.cfg`)
The simulator uses a configuration file named `default.cfg` to set up the environment and other parameters at runtime. This file defines settings like the window size, grid dimensions, obstacle probabilities, and the number of robots. Below is an example configuration:

```plaintext
application:{
    window:{
        title = "simulator"
        size = {w = 900, h = 900}
    }
    environment:{
        cellDims = {w = 3, h = 3} # Width and height of each cell (affects rendering)
        origin = {x = 0, y = 0} # Origin of the grid (affects rendering)
        gridDims = {rows = 8, cols = 8} # Grid dimensions (rows and columns)
        obsProb = 0.0 # Probability of static obstacles in the grid
        dynamicProb = 0.0 #Density of dynamic obstacles
        waitProbability = 0.0 # Probability of robots waiting at a time step
        n_robots = 200 # Number of randomly placed robots

        map = "den520d.map" # Name of the map to load
    }
}

```
The map must be placed inside the `../maps/` directory, relative to the `environment.cpp` file. If no map name is provided, the code will default to using the map called *Covelo*. This will generate a map of rowsxcols dimensions, where static
obstacles will randomly generate with a probability of 'obsProb'.

Depending on the map you're using, you can customize parameters like `cellDims` and `origin`. For example, the *den520d* map has large dimensions of $256\times 256$, so setting the `cellDims` to `3x3` pixels allows the entire map to fit inside a 900x900 window.

For smaller maps, you can increase the cell size to better fit the window. These parameters are purely for rendering purposes and do not affect the simulation.

When running the executable generated by `make`, a command line argument can be provided, indicating the number of simulations to be run in that map. If no number is provided, the default is 25 simulations. For example:
`./sim 10` will run 10 simulations. When a simulation finishes, the results are saved in the `../results/<map_name>/` directory, in a file with the name `<map_name>_<sim_num>.dat` where `<sim_num>` is the number of that simulation. 
If there are already simulation files inside that directory, `<sim_num>` will be the number of the latest simulation plus one.
